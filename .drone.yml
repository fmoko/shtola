---
kind: pipeline
type: docker
name: default

steps:
  - name: test
    image: rust:slim
    commands:
      - cargo test
  - name: coverage
    image: rust:slim
    commands:
      - cargo install cargo-tarpaulin
      - cargo tarpaulin --coveralls ${COVERALLS}
    environment:
      COVERALLS:
        from_secret: coveralls_id
